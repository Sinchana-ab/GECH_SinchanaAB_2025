package com.emai_writer.service;

import java.util.Map;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import com.emai_writer.controller.EmailRequest;

@Service
public class EmailGeneratorService {
	public String genrateEmailReply(EmailRequest emailRequest) {
		
		@Value("$gemini.api.url}")
		private String geminApiUrl;
		
		private String geminiApiKey;
		
		
		
		
		//build the prompt
		String prompt  = buildPromt(emailRequest);
		
		//craft a request
		Map<String, Object> requestBody = Map.of(
					"contents", new Object[] {
							Map.of("parts", new Object[] {
									Map.of("text", prompt )
							})
							
					}
				);
	//	return prompt.toString();
	}
	private String buildPromt(EmailRequest emailRequest) {
		StringBuilder prompt = new StringBuilder();
		prompt.append("Generate a prfessional email reply for the following email content, Please don't generate subject line");
		if(emailRequest.getTone() != null && !emailRequest.getTone().isEmpty()) {
			prompt.append("Use a ").append(emailRequest.getTone()).append(" tone.");
		}
		prompt.append("\nOriginal email: \n").append(emailRequest.getEmailContent());
		return prompt.toString();
	}
}
